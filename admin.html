<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles/admin.css" />
    <link href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css" rel="stylesheet" />
    <title>Panel de Administraci√≥n - Felipe Sneakers</title>
    <style>
        /* Estilos inline para carga inmediata */
        .preload {
            opacity: 0;
            animation: fadeIn 0.3s ease forwards;
        }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Login Screen -->
        <div class="login-screen" id="login-screen">
            <div class="login-container preload">
                <div class="login-header">
                    <h1><i class='bx bx-lock-alt'></i> Acceso Administrativo</h1>
                    <p class="text-muted">Felipe Sneakers - Panel de Control</p>
                </div>
                <form class="login-form" id="login-form">
                    <div class="form-group">
                        <label for="admin-password">Contrase√±a de Administrador</label>
                        <input type="password" id="admin-password" required 
                               placeholder="Ingresa la contrase√±a"
                               autocomplete="current-password">
                    </div>
                    <button type="submit" class="btn btn-primary btn-large mt-2">
                        <i class='bx bx-log-in'></i> Acceder al Panel
                    </button>
                </form>
                <div class="login-footer mt-3">
                    <a href="index.html" class="back-link">
                        <i class='bx bx-arrow-back'></i> Volver a la Tienda
                    </a>
                </div>
            </div>
        </div>

        <!-- Admin Panel (hidden until login) -->
        <div class="admin-panel" id="admin-panel" style="display: none;">
            <!-- Header del Admin -->
            <header class="admin-header">
                <div class="admin-nav">
                    <a href="index.html" class="admin-logo" title="Volver al cat√°logo principal">
                        <i class='bx bx-arrow-back'></i>
                        <span>Volver a la Tienda</span>
                    </a>
                    <h1>Panel de Administraci√≥n</h1>
                    <div class="admin-actions">
                        <button class="btn btn-secondary" id="export-btn" 
                                title="Exportar productos a archivo JSON">
                            <i class='bx bx-download'></i> Exportar
                        </button>
                        <button class="btn btn-primary" id="save-btn"
                                title="Guardar todos los cambios">
                            <i class='bx bx-save'></i> Guardar Cambios
                        </button>
                        <button class="btn btn-danger" id="logout-btn"
                                title="Cerrar sesi√≥n del panel">
                            <i class='bx bx-log-out'></i> Cerrar Sesi√≥n
                        </button>
                    </div>
                </div>
            </header>

            <main class="admin-main">
                <!-- Secci√≥n para agregar nuevo producto -->
                <section class="admin-section preload">
                    <h2><i class='bx bx-plus'></i> Agregar Nuevo Producto</h2>
                    <form class="product-form" id="product-form">
                        <div class="form-grid">
                            <!-- Nombre del Producto -->
                            <div class="form-group">
                                <label for="product-name">
                                    <i class='bx bx-rename'></i> Nombre del Producto
                                </label>
                                <input type="text" id="product-name" required 
                                       placeholder="Ej: Adidas Ultraboost 22"
                                       autocomplete="off">
                                <small class="text-muted">Nombre completo del producto para el cat√°logo</small>
                            </div>

                            <!-- Categor√≠a -->
                            <div class="form-group">
                                <label for="product-category">
                                    <i class='bx bx-category'></i> Categor√≠a
                                </label>
                                <select id="product-category" required>
                                    <option value="">Seleccionar categor√≠a</option>
                                    <option value="destacados">‚≠ê Destacados</option>
                                    <option value="hombres">üë® Hombres</option>
                                    <option value="mujeres">üë© Mujeres</option>
                                    <option value="nike">‚úì Nike</option>
                                    <option value="adidas">‚úì Adidas</option>
                                </select>
                                <small class="text-muted">Determina en qu√© secci√≥n aparecer√°</small>
                            </div>

                            <!-- Marca -->
                            <div class="form-group">
                                <label for="product-brand">
                                    <i class='bx bx-purchase-tag'></i> Marca
                                </label>
                                <select id="product-brand" required>
                                    <option value="">Seleccionar marca</option>
                                    <option value="nike">Nike</option>
                                    <option value="adidas">Adidas</option>
                                    <option value="otra">Otra marca</option>
                                </select>
                                <small class="text-muted">Marca principal del producto</small>
                            </div>

                            <!-- Etiqueta -->
                            <div class="form-group">
                                <label for="product-badge">
                                    <i class='bx bx-label'></i> Etiqueta
                                </label>
                                <select id="product-badge" required>
                                    <option value="Nuevo">üÜï Nuevo</option>
                                    <option value="Oferta">üè∑Ô∏è Oferta</option>
                                    <option value="Popular">üî• Popular</option>
                                    <option value="Limitado">üéØ Edici√≥n Limitada</option>
                                    <option value="Exclusivo">üëë Exclusivo</option>
                                </select>
                                <small class="text-muted">Etiqueta visual para destacar</small>
                            </div>

                            <!-- Descripci√≥n -->
                            <div class="form-group full-width">
                                <label for="product-description">
                                    <i class='bx bx-text'></i> Descripci√≥n del Producto
                                </label>
                                <textarea id="product-description" 
                                          placeholder="Describe las caracter√≠sticas principales, materiales, tecnolog√≠a, etc..."
                                          rows="4"></textarea>
                                <small class="text-muted">Esta descripci√≥n se mostrar√° en el cat√°logo para los clientes</small>
                            </div>

                            <!-- Tallas -->
                            <div class="form-group">
                                <label for="product-sizes">
                                    <i class='bx bx-ruler'></i> Tallas Disponibles
                                </label>
                                <input type="text" id="product-sizes" 
                                       placeholder="Ej: 38, 39, 40, 41, 42, 43"
                                       autocomplete="off" />
                                <small class="text-muted">Separa las tallas con comas</small>
                            </div>

                            <!-- Mensaje WhatsApp -->
                            <div class="form-group full-width">
                                <label for="product-message">
                                    <i class='bx bxl-whatsapp'></i> Mensaje de WhatsApp
                                </label>
                                <textarea id="product-message" required 
                                          placeholder="Este mensaje se enviar√° autom√°ticamente cuando un cliente haga clic en 'Consultar Disponibilidad'..."
                                          rows="3"></textarea>
                                <small class="text-muted">Se genera autom√°ticamente al escribir el nombre del producto</small>
                            </div>

                            <!-- Imagen del Producto -->
                            <div class="form-group full-width">
                                <label for="product-image">
                                    <i class='bx bx-image'></i> Imagen del Producto
                                </label>
                                <div class="image-upload">
                                    <input type="file" id="product-image" accept="image/*" required
                                           data-tooltip="Formatos: JPG, PNG, WebP. M√°x. 2MB">
                                    
                                    <label for="product-image" class="upload-area">
                                        <div class="upload-btn">
                                            <i class='bx bx-cloud-upload'></i>
                                            <span>Seleccionar Imagen</span>
                                        </div>
                                        <p class="mt-1 text-muted">
                                            Arrastra y suelta o haz clic para subir
                                        </p>
                                        <p class="text-xs text-muted mt-1">
                                            Formatos: JPG, PNG, WebP ‚Ä¢ M√°ximo: 2MB
                                        </p>
                                    </label>
                                    
                                    <div class="image-preview" id="image-preview">
                                        <span class="placeholder-text">Vista previa aparecer√° aqu√≠</span>
                                        <div class="image-loading" style="display: none;">
                                            <i class='bx bx-loader-circle bx-spin'></i>
                                            <span>Subiendo imagen a servidor...</span>
                                        </div>
                                    </div>
                                </div>
                                <small class="text-muted mt-1">
                                    <i class='bx bx-info-circle'></i> Las im√°genes se suben autom√°ticamente a un servidor p√∫blico
                                </small>
                            </div>
                        </div>

                        <div class="form-actions mt-3">
                            <button type="submit" class="btn btn-success btn-large">
                                <i class='bx bx-check'></i> Agregar Producto
                            </button>
                            <button type="button" class="btn btn-secondary" id="reset-form-btn">
                                <i class='bx bx-reset'></i> Limpiar Formulario
                            </button>
                        </div>
                    </form>
                </section>

                <!-- Lista de productos existentes -->
                <section class="admin-section preload">
                    <div class="section-header">
                        <h2><i class='bx bx-grid-alt'></i> Productos Existentes</h2>
                        <div class="stats-badge" id="products-count">
                            <i class='bx bx-package'></i>
                            <span>0 productos</span>
                        </div>
                    </div>
                    
                    <div class="products-grid" id="products-grid">
                        <!-- Los productos se cargan din√°micamente -->
                        <div class="empty-state full-width">
                            <div class="empty-icon">
                                <i class='bx bx-package'></i>
                            </div>
                            <h3>No hay productos</h3>
                            <p class="text-muted">Agrega tu primer producto usando el formulario de arriba.</p>
                            <button class="btn btn-primary mt-2" onclick="document.getElementById('product-form').scrollIntoView()">
                                <i class='bx bx-plus'></i> Agregar Primer Producto
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Gesti√≥n del producto destacado en home -->
                <section class="admin-section preload">
                    <h2><i class='bx bx-home'></i> Producto Destacado en Inicio</h2>
                    
                    <div class="featured-management">
                        <div class="form-group">
                            <label for="featured-product">
                                <i class='bx bx-star'></i> Seleccionar Producto para la Portada
                            </label>
                            <select id="featured-product" class="featured-select">
                                <option value="">Seleccionar producto destacado</option>
                                <option value="" disabled>No hay productos en "Destacados"</option>
                            </select>
                            <small class="text-muted">
                                Este producto aparecer√° destacado en la p√°gina principal
                            </small>
                        </div>
                        <button class="btn btn-primary" id="update-featured-btn">
                            <i class='bx bx-check'></i> Actualizar Portada
                        </button>
                    </div>
                    
                    <div class="info-box mt-3">
                        <i class='bx bx-info-circle'></i>
                        <div>
                            <p class="text-muted mb-0">
                                <strong>Importante:</strong> Solo los productos en la categor√≠a "Destacados" 
                                aparecer√°n en esta lista. Para destacar un producto, primero agr√©galo o 
                                ed√≠talo y selecciona la categor√≠a "Destacados".
                            </p>
                        </div>
                    </div>
                </section>

                <!-- Panel de estad√≠sticas -->
                <section class="admin-section preload">
                    <h2><i class='bx bx-stats'></i> Estad√≠sticas</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class='bx bx-package'></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-products">0</h3>
                                <p class="text-muted">Productos Totales</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class='bx bx-image'></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="public-images">0</h3>
                                <p class="text-muted">Im√°genes P√∫blicas</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class='bx bx-category'></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="categories-count">0</h3>
                                <p class="text-muted">Categor√≠as Activas</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class='bx bx-check-shield'></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="local-images">0</h3>
                                <p class="text-muted">Im√°genes Locales</p>
                            </div>
                        </div>
                    </div>
                </section>
            </main>

            <!-- Notificaciones -->
            <div class="notification" id="notification">
                <div class="notification-content">
                    <i class='bx bx-info-circle notification-icon'></i>
                    <span id="notification-message"></span>
                </div>
                <button class="notification-close" id="notification-close" aria-label="Cerrar notificaci√≥n">
                    <i class='bx bx-x'></i>
                </button>
            </div>

            <!-- Footer del Admin -->
            <footer class="admin-footer">
                <div class="footer-content">
                    <div class="footer-section">
                        <h4><i class='bx bx-shield'></i> Panel Seguro</h4>
                        <p class="text-muted">Sesi√≥n activa: <span id="session-time">00:00</span></p>
                    </div>
                    <div class="footer-section">
                        <h4><i class='bx bx-cloud'></i> Servicios</h4>
                        <p class="text-muted">Almacenamiento: ImgBB</p>
                    </div>
                    <div class="footer-section">
                        <h4><i class='bx bx-code'></i> Sistema</h4>
                        <p class="text-muted">v2.0 ‚Ä¢ Felipe Sneakers</p>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p class="text-muted">
                        &copy; 2025 Felipe Sneakers ‚Ä¢ Panel de Administraci√≥n ‚Ä¢ 
                        <a href="javascript:void(0)" id="clear-cache" class="text-link">Limpiar cach√©</a>
                    </p>
                </div>
            </footer>
        </div>
    </div>

    <script src="js/admin.js"></script>
</body>
</html>